<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Live Student Monitoring</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <div class="container mt-4">
        <h2>Live Student Monitoring</h2>
        <div id="videoGrid" class="row"></div>
    </div>
    <script>
    const socket = io();
    socket.on('student_stream', function(data) {
        let videoId = 'student_' + data.student_id;
        let videoElem = document.getElementById(videoId);
        if (!videoElem) {
            let col = document.createElement('div');
            col.className = 'col-md-4 mb-3';
            videoElem = document.createElement('video');
            videoElem.id = videoId;
            videoElem.autoplay = true;
            videoElem.controls = false;
            videoElem.width = 320;
            videoElem.height = 240;
            col.appendChild(videoElem);
            let grid = document.getElementById('videoGrid');
            grid.appendChild(col);
        }
        // Set video src from base64
        videoElem.src = data.stream_url;
    });
    </script>
</body>
</html>