<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard - Emerging India Analytics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Include your CSS file here -->
   <style>
   :root {
    --primary-color: #b02a37;
    --primary-dark: #9a2530;
    --text-color: #333;
    --bg-light: #f8f9fa;
    --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 10px 30px rgba(0, 0, 0, 0.1);
    --border-radius: 15px;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f5f5f5;
    color: var(--text-color);
}

/* Navbar styles */
.navbar {
    background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    padding: 12px 0;
}

.navbar-brand {
    font-weight: 600;
    letter-spacing: 0.5px;
}

.navbar .dropdown-menu {
    border-radius: 10px;
    box-shadow: var(--shadow-sm);
    border: none;
    animation: fadeIn 0.3s ease-out;
}

.navbar .dropdown-item:hover {
    background-color: rgba(176, 42, 55, 0.1);
}

/* Sidebar styles */
.sidebar {
    min-height: calc(100vh - 64px);
    background-color: white;
    padding-top: 20px;
    box-shadow: var(--shadow-sm);
    border-radius: 0 var(--border-radius) var(--border-radius) 0;
    animation: slideInRight 0.5s ease-out;
}

.sidebar .nav-link {
    color: var(--text-color);
    border-radius: 0 30px 30px 0;
    margin: 5px 0;
    padding: 12px 20px;
    transition: all 0.3s;
}

.sidebar .nav-link.active {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    color: white;
    box-shadow: 0 4px 10px rgba(176, 42, 55, 0.3);
}

.sidebar .nav-link:hover:not(.active) {
    background-color: rgba(176, 42, 55, 0.1);
    transform: translateX(5px);
}

.sidebar .nav-link i {
    margin-right: 10px;
}

/* Main content styles */
.main-content {
    padding: 20px;
    animation: fadeIn 0.5s ease-out;
}

/* Card styles */
.card {
    border: none;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
    transition: all 0.3s;
}

.profile-card {
    background-color: white;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-md);
    padding: 25px;
    margin-bottom: 30px;
    animation: slideInUp 0.5s ease-out;
}

.exam-card {
    margin-bottom: 20px;
    box-shadow: var(--shadow-sm);
    transition: transform 0.3s, box-shadow 0.3s;
    animation: slideInUp 0.5s ease-out;
    animation-delay: calc(var(--animation-order) * 0.1s);
}

.exam-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-md);
}

.card-header {
    padding: 15px 20px;
}

.card-header.bg-success {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)) !important;
}

.card-header.bg-info {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)) !important;
}

.result-card {
    margin-bottom: 20px;
    animation: slideInUp 0.5s ease-out;
    animation-delay: calc(var(--animation-order) * 0.1s);
}

.no-exams-card {
    background-color: white;
    border-radius: var(--border-radius);
    padding: 40px 20px;
    text-align: center;
    margin-bottom: 20px;
    box-shadow: var(--shadow-sm);
    animation: slideInUp 0.5s ease-out;
}

/* Button styles */
.btn-primary {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    border: none;
    border-radius: 8px;
    padding: 10px 20px;
    font-weight: 600;
    letter-spacing: 0.5px;
    box-shadow: 0 4px 10px rgba(176, 42, 55, 0.3);
    transition: all 0.3s;
}

.btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(176, 42, 55, 0.4);
}

.btn-primary:active {
    transform: translateY(-1px);
}

.btn-info {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    border: none;
    box-shadow: 0 4px 10px rgba(176, 42, 55, 0.3);
}

.btn-info:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(176, 42, 55, 0.4);
}

/* Badge styles */
.badge {
    padding: 6px 12px;
    border-radius: 20px;
    font-weight: 500;
}

.bg-primary {
    background-color: var(--primary-color) !important;
}

.bg-info {
    background-color: var(--primary-color) !important;
    opacity: 0.9;
}

.bg-secondary {
    background-color: #6c757d !important;
}

.bg-danger {
    background-color: var(--primary-color) !important;
}

.bg-warning {
    background-color: var(--primary-color) !important;
    opacity: 0.8;
}

.bg-success {
    background-color: var(--primary-color) !important;
    opacity: 0.95;
}

.timer-badge {
    font-size: 0.9rem;
    padding: 6px 12px;
    border-radius: 20px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

/* Progress bar styles */
.progress {
    height: 20px;
    border-radius: 10px;
    background-color: #e9ecef;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
    margin: 15px 0;
}

.progress-bar {
    border-radius: 10px;
}

.progress-bar.bg-primary {
    background-color: var(--primary-color) !important;
}

.progress-bar.bg-success {
    background-color: var(--primary-color) !important;
}

.progress-bar.bg-warning {
    background-color: var(--primary-color) !important;
    opacity: 0.8;
}

.progress-bar.bg-danger {
    background-color: var(--primary-color) !important;
    opacity: 0.6;
}

/* Avatar styles */
.user-avatar {
    width: 100px;
    height: 100px;
    display: block;
    margin: 0 auto;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    border-radius: 50%;
    padding: 3px;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
}

.avatar-container {
    text-align: center;
}

.avatar-container .edit-link {
    display: inline-block;
    margin-top: 12px;
    font-size: 0.9rem;
    color: var(--primary-color);
    text-decoration: none;
    transition: all 0.3s;
}

.avatar-container .edit-link:hover {
    color: var(--primary-dark);
    transform: translateY(-2px);
}

.navbar-avatar {
    width: 32px;
    height: 32px;
    margin-right: 8px;
    vertical-align: middle;
    display: inline-block;
    border: 2px solid rgba(255, 255, 255, 0.5);
    border-radius: 50%;
}

.avatar-svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
    background-color: white;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Fix all avatar colors to match theme */
.avatar-svg circle[fill="#a6223c"],
.avatar-svg path[fill="#a6223c"],
.avatar-svg path[stroke="#a6223c"],
.avatar-svg rect[fill="#85192f"],
.avatar-svg path[stroke="#85192f"],
.avatar-svg path[fill="#c73e58"],
.avatar-svg path[stroke="#c73e58"] {
    fill: var(--primary-color);
    stroke: var(--primary-color);
}

/* Section title styles */
.section-title {
    position: relative;
    padding-bottom: 10px;
    margin-bottom: 25px;
    font-weight: 600;
    color: var(--primary-dark);
}

.section-title:after {
    content: '';
    position: absolute;
    left: 0;
    bottom: 0;
    width: 50px;
    height: 3px;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    border-radius: 3px;
}

/* Alert styles */
.alert {
    border-radius: var(--border-radius);
    border: none;
    box-shadow: var(--shadow-sm);
    animation: slideInDown 0.5s ease-out;
}

/* Footer styles */
footer {
    background-color: #f8f9fa;
    border-top: 1px solid #e9ecef;
}

footer a {
    color: var(--primary-color) !important;
}

footer a:hover {
    color: var(--primary-dark) !important;
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes slideInUp {
    from {
        transform: translateY(30px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes slideInRight {
    from {
        transform: translateX(-30px);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideInDown {
    from {
        transform: translateY(-30px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* Set animation order for cards */
.exam-card:nth-child(1) { --animation-order: 1; }
.exam-card:nth-child(2) { --animation-order: 2; }
.exam-card:nth-child(3) { --animation-order: 3; }
.result-card:nth-child(1) { --animation-order: 1; }
.result-card:nth-child(2) { --animation-order: 2; }
.result-card:nth-child(3) { --animation-order: 3; }

/* Fix for any remaining instances of the old color */
i[style*="#0d6efd"] {
    color: var(--primary-color) !important;
}
   </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="{{ url_for('index') }}">Emerging India Analytics</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle text-white" href="#" id="navbarDropdown" role="button"
                           data-bs-toggle="dropdown" aria-expanded="false">
                           {% if current_user.avatar %}
                                <!-- Display the user's avatar -->
                                <span class="navbar-avatar">
                                    {% if current_user.avatar == 'male-1' %}
                                        <svg class="avatar-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                            <circle cx="50" cy="50" r="50" fill="#e6e6e6"/>
                                            <circle cx="50" cy="42" r="20" fill="#a6223c"/>
                                            <path d="M25 85 Q50 65 75 85" stroke="#a6223c" stroke-width="2" fill="none"/>
                                            <circle cx="42" cy="40" r="3" fill="#ffffff"/>
                                            <circle cx="58" cy="40" r="3" fill="#ffffff"/>
                                            <path d="M35 60 Q50 70 65 60" stroke="#333333" stroke-width="2" fill="none"/>
                                            <path d="M20 30 Q30 20 40 28" stroke="#333333" stroke-width="2" fill="none"/>
                                            <path d="M80 30 Q70 20 60 28" stroke="#333333" stroke-width="2" fill="none"/>
                                        </svg>
                                    {% elif current_user.avatar == 'male-2' %}
                                        <svg class="avatar-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                            <circle cx="50" cy="50" r="50" fill="#e6e6e6"/>
                                            <rect x="30" y="20" width="40" height="30" rx="15" fill="#85192f"/>
                                            <circle cx="50" cy="45" r="20" fill="#c3aea2"/>
                                            <circle cx="42" cy="40" r="3" fill="#333333"/>
                                            <circle cx="58" cy="40" r="3" fill="#333333"/>
                                            <rect x="35" y="50" width="30" height="2" rx="1" fill="#333333"/>
                                            <path d="M25 85 Q50 75 75 85" stroke="#85192f" stroke-width="2" fill="none"/>
                                        </svg>
                                    {% elif current_user.avatar == 'female-1' %}
                                        <svg class="avatar-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                            <circle cx="50" cy="50" r="50" fill="#e6e6e6"/>
                                            <path d="M25 35 Q50 10 75 35 L75 50 Q50 65 25 50 Z" fill="#c73e58"/>
                                            <circle cx="50" cy="45" r="20" fill="#f4d5dc"/>
                                            <circle cx="42" cy="40" r="3" fill="#333333"/>
                                            <circle cx="58" cy="40" r="3" fill="#333333"/>
                                            <path d="M42 52 Q50 58 58 52" stroke="#333333" stroke-width="2" fill="none"/>
                                            <path d="M25 85 Q50 65 75 85" stroke="#c73e58" stroke-width="2" fill="none"/>
                                        </svg>
                                    {% elif current_user.avatar == 'female-2' %}
                                        <svg class="avatar-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                            <circle cx="50" cy="50" r="50" fill="#e6e6e6"/>
                                            <path d="M20 55 Q50 15 80 55 L75 70 Q50 85 25 70 Z" fill="#a6223c"/>
                                            <circle cx="50" cy="45" r="18" fill="#ffe0b2"/>
                                            <circle cx="42" cy="40" r="3" fill="#333333"/>
                                            <circle cx="58" cy="40" r="3" fill="#333333"/>
                                            <path d="M40 52 Q50 60 60 52" stroke="#333333" stroke-width="2" fill="none"/>
                                            <path d="M30 35 L35 30" stroke="#333333" stroke-width="2" fill="none"/>
                                            <path d="M70 35 L65 30" stroke="#333333" stroke-width="2" fill="none"/>
                                        </svg>
                                    {% else %}
                                        <i class="bi bi-person-circle" style="font-size: 2rem; color: white;"></i>
                                    {% endif %}
                                </span>
                            {% else %}
                                <i class="bi bi-person-circle"></i>
                            {% endif %}
                            {{ current_user.name }}
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="{{ url_for('complete_profile') }}">
                                <i class="fas fa-user-edit me-2"></i>Edit Profile
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="{{ url_for('logout') }}">
                                <i class="fas fa-sign-out-alt me-2"></i>Logout
                            </a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="{{ url_for('student_dashboard') }}">
                                <i class="fas fa-tachometer-alt"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-book"></i> Courses
                            </a>
                        </li>


                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('blog') }}">
                                <i class="fas fa-rss"></i> Blog
                            </a>
                        </li>


                    </ul>
                </div>
            </div>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-4 pb-2 mb-4 border-bottom">
                    <h2 class="section-title">Student Dashboard</h2>
                </div>

                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="alert alert-{{ category }}">{{ message }}</div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}

                <div class="profile-card">
                    <div class="row">
                        <div class="col-md-8">
                            <h4 class="mb-4">Your Profile</h4>
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong><i class="fas fa-user me-2"></i>Name:</strong> {{ current_user.name }}</p>
                                    <p><strong><i class="fas fa-envelope me-2"></i>Email:</strong> {{ current_user.email }}</p>
                                </div>
                                <div class="col-md-6">
                                    <p><strong><i class="fas fa-graduation-cap me-2"></i>Stream:</strong> {{ current_user.stream }}</p>
                                    <p><strong><i class="fas fa-phone me-2"></i>Contact:</strong> {{ current_user.contact }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="avatar-container">
                                {% if current_user.avatar %}
                                    <!-- Display the selected avatar -->
                                    <div class="user-avatar">
                                        {% if current_user.avatar == 'male-1' %}
                                            <svg class="avatar-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="50" cy="50" r="50" fill="#e6e6e6"/>
                                                <circle cx="50" cy="42" r="20" fill="#a6223c"/>
                                                <path d="M25 85 Q50 65 75 85" stroke="#a6223c" stroke-width="2" fill="none"/>
                                                <circle cx="42" cy="40" r="3" fill="#ffffff"/>
                                                <circle cx="58" cy="40" r="3" fill="#ffffff"/>
                                                <path d="M35 60 Q50 70 65 60" stroke="#333333" stroke-width="2" fill="none"/>
                                                <path d="M20 30 Q30 20 40 28" stroke="#333333" stroke-width="2" fill="none"/>
                                                <path d="M80 30 Q70 20 60 28" stroke="#333333" stroke-width="2" fill="none"/>
                                            </svg>
                                        {% elif current_user.avatar == 'male-2' %}
                                            <svg class="avatar-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="50" cy="50" r="50" fill="#e6e6e6"/>
                                                <rect x="30" y="20" width="40" height="30" rx="15" fill="#85192f"/>
                                                <circle cx="50" cy="45" r="20" fill="#c3aea2"/>
                                                <circle cx="42" cy="40" r="3" fill="#333333"/>
                                                <circle cx="58" cy="40" r="3" fill="#333333"/>
                                                <rect x="35" y="50" width="30" height="2" rx="1" fill="#333333"/>
                                                <path d="M25 85 Q50 75 75 85" stroke="#85192f" stroke-width="2" fill="none"/>
                                            </svg>
                                        {% elif current_user.avatar == 'female-1' %}
                                            <svg class="avatar-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="50" cy="50" r="50" fill="#e6e6e6"/>
                                                <path d="M25 35 Q50 10 75 35 L75 50 Q50 65 25 50 Z" fill="#c73e58"/>
                                                <circle cx="50" cy="45" r="20" fill="#f4d5dc"/>
                                                <circle cx="42" cy="40" r="3" fill="#333333"/>
                                                <circle cx="58" cy="40" r="3" fill="#333333"/>
                                                <path d="M42 52 Q50 58 58 52" stroke="#333333" stroke-width="2" fill="none"/>
                                                <path d="M25 85 Q50 65 75 85" stroke="#c73e58" stroke-width="2" fill="none"/>
                                            </svg>
                                        {% elif current_user.avatar == 'female-2' %}
                                            <svg class="avatar-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="50" cy="50" r="50" fill="#e6e6e6"/>
                                                <path d="M20 55 Q50 15 80 55 L75 70 Q50 85 25 70 Z" fill="#a6223c"/>
                                                <circle cx="50" cy="45" r="18" fill="#ffe0b2"/>
                                                <circle cx="42" cy="40" r="3" fill="#333333"/>
                                                <circle cx="58" cy="40" r="3" fill="#333333"/>
                                                <path d="M40 52 Q50 60 60 52" stroke="#333333" stroke-width="2" fill="none"/>
                                                <path d="M30 35 L35 30" stroke="#333333" stroke-width="2" fill="none"/>
                                                <path d="M70 35 L65 30" stroke="#333333" stroke-width="2" fill="none"/>
                                            </svg>
                                        {% else %}
                                            <i class="bi bi-person-circle" style="font-size: 4rem; color: #0d6efd;"></i>
                                        {% endif %}
                                    </div>
                                {% else %}
                                    <div class="user-avatar d-flex align-items-center justify-content-center">
                                        <i class="fas fa-user-circle" style="font-size: 3.5rem; color: white;"></i>
                                    </div>
                                {% endif %}
                                <a href="{{ url_for('complete_profile') }}" class="edit-link">
                                    <i class="fas fa-pencil-alt me-1"></i> Edit Profile
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 class="section-title mt-5">Active Exams</h3>

                <div class="row">
                    {% if active_exams %}
                        {% for exam in active_exams %}
                            <div class="col-md-6 col-lg-4">
                                <div class="card exam-card">
                                    <div class="card-header bg-success text-white">
                                        <span><i class="fas fa-clock me-2"></i> Active</span>

                                        <!-- Check if student has already started this exam -->
                                        {% set student_exam = current_user.exams | selectattr('exam_id', 'equalto', exam.id) | first %}
                                        {% if student_exam and student_exam.is_completed %}
                                            <span class="float-end badge bg-info">
                                                <i class="fas fa-check-circle me-1"></i> Completed
                                            </span>
                                        {% elif student_exam %}
                                            <span class="float-end badge bg-warning">
                                                <i class="fas fa-hourglass-split me-1"></i> In Progress
                                            </span>
                                        {% endif %}
                                    </div>
                                    <div class="card-body">
                                        <h5 class="card-title">{{ exam.title }}</h5>
                                        <p class="card-text">{{ exam.description | truncate(100) }}</p>

                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="badge bg-secondary">
                                                <i class="fas fa-question-circle me-1"></i> {{ exam.questions | length }} Questions
                                            </span>
                                            <span class="badge bg-primary">
                                                <i class="fas fa-stopwatch me-1"></i> {{ exam.duration }} minutes
                                            </span>
                                        </div>

                                        <!-- Timer calculation -->
                                        {% if exam.end_time %}
                                            {% set time_diff = exam.end_time - now() %}
                                            {% set minutes_left = (time_diff.total_seconds() / 60) | int %}
                                            {% if minutes_left > 0 %}
                                                <div class="mt-3 text-center">
                                                    <span class="badge bg-danger timer-badge">
                                                        <i class="fas fa-alarm-clock me-1"></i> Ends in {{ minutes_left }} minutes
                                                    </span>
                                                </div>
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                    <div class="card-footer">
                                        {% if student_exam and student_exam.is_completed %}
                                            <button class="btn btn-secondary w-100" disabled>
                                                <i class="fas fa-check-circle me-2"></i> Already Completed
                                            </button>
                                        {% else %}
                                            <a href="{{ url_for('take_exam', exam_id=exam.id) }}" class="btn btn-primary w-100">
                                                {% if student_exam %}
                                                    <i class="fas fa-arrow-right me-2"></i> Continue Exam
                                                {% else %}
                                                    <i class="fas fa-pencil-alt me-2"></i> Start Exam
                                                {% endif %}
                                            </a>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="col-12">
                            <div class="no-exams-card">
                                <i class="fas fa-calendar-times" style="font-size: 3rem; color: var(--primary-color);"></i>
                                <h5 class="mt-3">No Active Exams Available</h5>
                                <p class="text-muted">There are currently no active exams for you to take.</p>
                            </div>
                        </div>
                    {% endif %}
                </div>

                <h3 class="section-title mt-5">Your Results</h3>

                <div class="row">
                    {% if completed_exams %}
                        {% for student_exam in completed_exams %}
                            <div class="col-md-6 col-lg-4">
                                <div class="card result-card">
                                    <div class="card-header bg-info text-white">
                                        <i class="fas fa-file-alt me-2"></i> Completed Exam
                                    </div>
                                    <div class="card-body">
                                        <h5 class="card-title">{{ student_exam.exam.title }}</h5>
                                        <p class="card-text">
                                            <strong><i class="fas fa-calendar-alt me-2"></i> Date:</strong>
                                            {{ student_exam.end_time.strftime('%Y-%m-%d') if student_exam.end_time else 'N/A' }}
                                       </p>
                                       <div class="text-center my-3">
                                           <div class="progress">
                                               <div class="progress-bar
                                                       {% if student_exam.score >= 75 %}bg-success
                                                       {% elif student_exam.score >= 50 %}bg-primary
                                                       {% elif student_exam.score >= 35 %}bg-warning
                                                       {% else %}bg-danger{% endif %}"
                                                   role="progressbar"
                                                   style="width: {{ student_exam.score }}%;"
                                                   aria-valuenow="{{ student_exam.score }}"
                                                   aria-valuemin="0"
                                                   aria-valuemax="100">
                                                   {{ "%.1f" | format(student_exam.score) }}%
                                               </div>
                                           </div>
                                       </div>
                                   </div>
                                   <div class="card-footer">
                                       <a href="{{ url_for('student_exam_result', student_exam_id=student_exam.id) }}" class="btn btn-info w-100">
                                           <i class="fas fa-eye me-2"></i> View Detailed Results
                                       </a>
                                   </div>
                               </div>
                           </div>
                       {% endfor %}
                   {% else %}
                       <div class="col-12">
                           <div class="no-exams-card">
                               <i class="fas fa-chart-bar" style="font-size: 3rem; color: var(--primary-color);"></i>
                               <h5 class="mt-3">No Results Available</h5>
                               <p class="text-muted">You haven't completed any exams yet or the results aren't available.</p>
                           </div>
                       </div>
                   {% endif %}
               </div>
           </main>
       </div>
   </div>
  <!-- Add a footer section -->
    <footer class="mt-5 py-4 text-center text-muted" style="background-color: #f8f9fa; border-top: 1px solid #e9ecef;">
        <div class="container">
            <p>Â© 2025 Emerging India Educational Services Private LTD. All rights reserved.</p>
            <div class="mt-2">
                <a href="#" class="text-decoration-none mx-2" style="color: var(--primary-color);"><i class="fab fa-facebook"></i></a>
                <a href="#" class="text-decoration-none mx-2" style="color: var(--primary-color);"><i class="fab fa-twitter"></i></a>
                <a href="#" class="text-decoration-none mx-2" style="color: var(--primary-color);"><i class="fab fa-linkedin"></i></a>
                <a href="#" class="text-decoration-none mx-2" style="color: var(--primary-color);"><i class="fab fa-instagram"></i></a>
            </div>
            <p class="mt-3 small">
                <a href="#" class="text-decoration-none text-muted mx-2">Privacy Policy</a>
                <a href="#" class="text-decoration-none text-muted mx-2">Terms of Service</a>
                <a href="#" class="text-decoration-none text-muted mx-2">Contact Us</a>
            </p>
        </div>
    </footer>
   <!-- Bootstrap and Custom JS will be included here -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
   <!-- Include your JS file here -->
<script>
   /**
* Student Dashboard JavaScript
* Handles interactions and avatar display for the student dashboard
*/

document.addEventListener('DOMContentLoaded', function() {
   // Get all avatar SVG elements
   const avatarSvgs = document.querySelectorAll('.avatar-svg');

   // Add hover effect to avatar SVGs
   avatarSvgs.forEach(svg => {
       svg.addEventListener('mouseenter', function() {
           this.style.transform = 'scale(1.05)';
           this.style.transition = 'transform 0.3s ease';
       });

       svg.addEventListener('mouseleave', function() {
           this.style.transform = 'scale(1)';
       });
   });

   // Handle active exams countdown timers if they exist
   const timerBadges = document.querySelectorAll('.timer-badge');
   if (timerBadges.length > 0) {
       // Update timers every minute
       setInterval(function() {
           timerBadges.forEach(badge => {
               const timerText = badge.innerText;
               const minutesMatch = timerText.match(/Ends in (\d+) minutes/);

               if (minutesMatch && minutesMatch[1]) {
                   let minutes = parseInt(minutesMatch[1]);
                   minutes -= 1;

                   if (minutes <= 0) {
                       badge.innerText = "Ending now";
                       badge.parentElement.classList.add('bg-danger');
                   } else {
                       badge.innerText = `Ends in ${minutes} minutes`;
                   }
               }
           });
       }, 60000); // 60000 ms = 1 minute
   }

   // Add tooltip functionality if avatar has tooltip data
   const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
   if (tooltipTriggerList.length > 0 && typeof bootstrap !== 'undefined') {
       tooltipTriggerList.map(function(tooltipTriggerEl) {
           return new bootstrap.Tooltip(tooltipTriggerEl);
       });
   }

   // Add confirmation dialog to logout button
   const logoutButton = document.querySelector('a[href*="logout"]');
   if (logoutButton) {
       logoutButton.addEventListener('click', function(e) {
           if (!confirm('Are you sure you want to logout?')) {
               e.preventDefault();
           }
       });
   }

   // Add animations to cards when they come into view
   const animateOnScroll = () => {
       const cards = document.querySelectorAll('.exam-card, .result-card');
       cards.forEach(card => {
           const cardTop = card.getBoundingClientRect().top;
           const cardBottom = card.getBoundingClientRect().bottom;
           const isVisible = (cardTop < window.innerHeight) && (cardBottom > 0);

           if (isVisible) {
               card.style.opacity = '1';
               card.style.transform = 'translateY(0)';
           }
       });
   };

   // Initial check for visible elements
   animateOnScroll();

   // Check on scroll
   window.addEventListener('scroll', animateOnScroll);

   // Add pulse effect to notification icons if they have alerts
   const notificationIcons = document.querySelectorAll('.has-notification');
   notificationIcons.forEach(icon => {
       icon.classList.add('notification-pulse');
   });

   // Initialize any popovers (for info buttons, help text, etc.)
   const popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));
   if (popoverTriggerList.length > 0 && typeof bootstrap !== 'undefined') {
       popoverTriggerList.map(function(popoverTriggerEl) {
           return new bootstrap.Popover(popoverTriggerEl);
       });
   }

   // Add smooth scroll behavior for sidebar links
   const sidebarLinks = document.querySelectorAll('.sidebar .nav-link');
   sidebarLinks.forEach(link => {
       link.addEventListener('click', function(e) {
           // Only apply for hash links that point to page sections
           if (this.getAttribute('href').startsWith('#')) {
               e.preventDefault();
               const targetId = this.getAttribute('href').substring(1);
               const targetElement = document.getElementById(targetId);

               if (targetElement) {
                   window.scrollTo({
                       top: targetElement.offsetTop - 70, // Offset for fixed header
                       behavior: 'smooth'
                   });
               }
           }
       });
   });

   // Add current date to the dashboard if there's an element for it
   const currentDateElement = document.getElementById('current-date');
   if (currentDateElement) {
       const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
       const today = new Date();
       currentDateElement.textContent = today.toLocaleDateString('en-US', options);
   }
});
</script>
</body>
</html>